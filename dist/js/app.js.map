{"version":3,"sources":["app/app.ts"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["enum KeyCodes {\r\n\tLEFT = 37,\r\n\tRIGHT = 39\r\n}\r\n\r\nenum GameState {\r\n\tGameOver,\r\n\tlifeLoss,\r\n\tRunning\r\n}\r\n\r\nenum Direction {\r\n\tNone = 0,\r\n\tLeft = -1,\r\n\tRight = 1,\r\n\tTop = -1,\r\n\tBottom = 1\r\n}\r\n\r\nenum OffsetType {\r\n\tX,\r\n\tY\r\n}\r\n\r\nenum Side {\r\n\tNone,\r\n\tLeft,\r\n\tTop,\r\n\tRight, \r\n\tBottom\r\n}\r\n\r\nclass GameElement {\r\n\r\n\tstep: number = 1;\r\n\tdirection: number[] = [1,-1];\r\n\r\n\tconstructor(public gameElement: HTMLElement, public boardElement: HTMLElement) {\r\n\t\t\r\n\t}\r\n\r\n\tgetElementOffset(element: HTMLElement, offsetType: OffsetType) {\r\n\t\tlet el = {size:0, offset:0};\r\n\t\tif(offsetType == OffsetType.X) {\r\n\t\t\tel.size = element.offsetWidth;\r\n\t\t\tel.offset = element.offsetLeft;\r\n\t\t}\r\n\t\tif(offsetType == OffsetType.Y) {\r\n\t\t\tel.size = element.offsetHeight;\r\n\t\t\tel.offset = element.offsetTop;\r\n\t\t};\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcalculatePosition(offsetType: OffsetType, direction: Direction = Direction.None) {\r\n\t\tlet boardElement = this.getElementOffset(this.boardElement, offsetType);\r\n\t\tlet gameElement = this.getElementOffset(this.gameElement, offsetType);\r\n\r\n\t\tlet minPos: number = 0;\r\n\t\tlet maxPos: number = boardElement['size'] - gameElement['size'];\r\n\t\tif(direction) {\r\n\t\t\tthis.direction[offsetType] = direction;\r\n\t\t} else if(gameElement['offset'] <= minPos || gameElement['offset'] >= maxPos) {\r\n\t\t\tthis.direction[offsetType] *= -1;\r\n\t\t}\r\n\t\tlet pos: number = gameElement['offset'] + this.step * this.direction[offsetType];\r\n\t\tpos = (pos>maxPos) ? maxPos : pos;\r\n\t\tpos = (pos<minPos) ? minPos : pos;\r\n\t\treturn pos;\r\n\r\n\t}\r\n\r\n\tmoveTo(x: number | boolean = false, y: number | boolean = false) {\r\n\t\tif(x !== false) this.gameElement.style.left = x + 'px';\r\n\t\tif(y !== false) this.gameElement.style.top = y + 'px';\r\n\t}\r\n\r\n}\r\n\r\nclass Ball extends GameElement {\r\n\r\n\tstep: number = 3;\r\n\tposX: number;\r\n\tposY: number;\r\n\tcollisionSide: Side;\r\n\r\n\tconstructor(public ballElement: HTMLElement, public paddleElement: HTMLElement, public boardElement: HTMLElement) {\r\n\t\tsuper(ballElement, boardElement);\r\n\t\tthis.posX = ballElement.offsetLeft;\r\n\t\tthis.posY = ballElement.offsetTop;\r\n\t\tthis.collisionSide = Side.None;\r\n\t}\r\n\r\n\tmove() {\r\n\t\t\r\n\t\tthis.posX = this.calculateNewPosition(OffsetType.X);\r\n\t\tthis.posY = this.calculateNewPosition(OffsetType.Y);\r\n\r\n\t\tthis.checkGameBoardCollision();\r\n\r\n\t\tif(this.checkObstacleCollision(this.paddleElement)) {\r\n\t\t\tthis.calculateEdgePosition(this.collisionSide, this.paddleElement);\r\n\t\t\tthis.flipDirection();\r\n\t\t}\r\n\r\n\t\tthis.moveTo(this.posX, this.posY);\r\n\t}\r\n\r\n\tcalculateNewPosition(offsetType: OffsetType) {\r\n\t\tlet pos: number;\r\n\t\tif(offsetType == OffsetType.X) pos = this.ballElement.offsetLeft + this.step * this.direction[offsetType];\r\n\t\tif(offsetType == OffsetType.Y) pos = this.ballElement.offsetTop + this.step * this.direction[offsetType];\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tcheckGameBoardCollision() {\r\n\t\tlet minX: number = 0;\r\n\t\tlet maxX: number = this.boardElement.offsetWidth - this.ballElement.offsetWidth;\r\n\t\tlet minY: number = 0;\r\n\t\tlet maxY: number = this.boardElement.offsetHeight - this.ballElement.offsetHeight;\r\n\t\tif(this.ballElement.offsetLeft < minX) {\r\n\t\t\tthis.posX = minX;\r\n\t\t\tthis.collisionSide = Side.Left;\r\n\t\t\tthis.flipDirection();\r\n\t\t}\r\n\t\tif(this.ballElement.offsetLeft > maxX) {\r\n\t\t\tthis.posX = maxX;\r\n\t\t\tthis.collisionSide = Side.Right;\r\n\t\t\tthis.flipDirection();\r\n\t\t}\r\n\t\tif(this.ballElement.offsetTop < minY) {\r\n\t\t\tthis.posY = minY;\r\n\t\t\tthis.collisionSide = Side.Top;\r\n\t\t\tthis.flipDirection();\r\n\t\t}\r\n\t\tif(this.ballElement.offsetTop > maxY) {\r\n\t\t\tthis.posY = maxY;\r\n\t\t\tthis.collisionSide = Side.Bottom;\r\n\t\t\tthis.flipDirection();\r\n\t\t}\r\n\t}\r\n\r\n\tcheckObstacleCollision(obstacle: HTMLElement) {\r\n\t\tvar w = 0.5 * (this.ballElement.offsetWidth + obstacle.offsetWidth);\r\n\t\tvar h = 0.5 * (this.ballElement.offsetHeight + obstacle.offsetHeight);\r\n\t\tvar dx = (this.ballElement.offsetLeft + this.ballElement.offsetWidth/2) - (obstacle.offsetLeft + obstacle.offsetWidth/2);\r\n\t\tvar dy = (this.ballElement.offsetTop + this.ballElement.offsetHeight/2) - (obstacle.offsetTop + obstacle.offsetHeight/2);\r\n\r\n\t\tif(Math.abs(dx) < w && Math.abs(dy) < h) {\r\n\t\t\tvar wy = w * dy;\r\n\t\t\tvar hx = h * dx;\r\n\t\t\tif(wy > hx) {\r\n\t\t\t\tif(wy > -hx) {\r\n\t\t\t\t\tthis.collisionSide = Side.Bottom\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.collisionSide = Side.Left\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\tif(wy > -hx) {\r\n\t\t\t\t\tthis.collisionSide = Side.Right\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.collisionSide = Side.Top\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.collisionSide = Side.None;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n    calculateEdgePosition(side: Side, obstacle: HTMLElement) {\r\n    \tswitch(side) {\r\n\t\t\tcase Side.Left:\r\n\t\t\t\tthis.posX = obstacle.offsetLeft + this.ballElement.offsetWidth;\r\n\t\t\t\tbreak;\r\n\t\t\tcase Side.Right:\r\n\t\t\t\tthis.posX = obstacle.offsetLeft + obstacle.offsetWidth;\r\n\t\t\t\tbreak;\r\n\t\t\tcase Side.Top:\r\n\t\t\t\tthis.posY = obstacle.offsetTop - this.ballElement.offsetHeight;\r\n\t\t\t\tbreak;\r\n\t\t\tcase Side.Bottom:\r\n\t\t\t\tthis.posY = obstacle.offsetTop + obstacle.offsetHeight;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n    }\r\n\r\n    flipDirection() {\r\n    \tif(this.collisionSide == Side.Left || this.collisionSide == Side.Right) this.direction[OffsetType.X] *= -1;\r\n    \tif(this.collisionSide == Side.Top || this.collisionSide == Side.Bottom) this.direction[OffsetType.Y] *= -1;\r\n    }\r\n\r\n    // getPosition() {\r\n\t// \treturn {x: this.posX, y: this.posY};\r\n\t// }\r\n\r\n}\r\n\r\nclass Paddle extends GameElement {\r\n\r\n\tstep: number = 4;\r\n\r\n\tconstructor(public paddleElement: HTMLElement, public boardElement: HTMLElement) {\r\n\t\tsuper(paddleElement, boardElement);\r\n\t}\r\n\r\n\tmoveLeft() {\r\n\t\tthis.moveTo(this.calculatePosition(OffsetType.X, Direction.Left), this.paddleElement.offsetTop);\r\n\t}\r\n\r\n\tmoveRight() {\r\n\t\tthis.moveTo(this.calculatePosition(OffsetType.X, Direction.Right), this.paddleElement.offsetTop);\r\n\t}\r\n\r\n}\r\n\r\nclass Game {\r\n\r\n\tintervalTime: number = 10;\r\n\tpaddle: Paddle;\r\n\tball: Ball;\r\n\tkeyMap: boolean[] = [];\r\n\r\n\tconstructor(public ballElement: HTMLElement, public paddleElement: HTMLElement, public boardElement: HTMLElement) {\r\n\t\tthis.paddle = new Paddle(this.paddleElement, this.boardElement);\r\n\t\tthis.ball = new Ball(this.ballElement, this.paddleElement, this.boardElement);\r\n\t}\r\n\r\n\trun() {\r\n\t\tdocument.addEventListener('keyup', e => this.keyMap[e.keyCode] = false);\r\n\t\tdocument.addEventListener('keydown', e => this.keyMap[e.keyCode] = true);\r\n\r\n\t\tsetInterval(() => {\r\n\r\n\t\t\tif(this.keyMap[KeyCodes.LEFT]) this.paddle.moveLeft();\r\n\t\t\tif(this.keyMap[KeyCodes.RIGHT]) this.paddle.moveRight();\r\n\r\n\t\t\tthis.ball.move();\r\n\r\n\t\t}, this.intervalTime);\r\n\t}\r\n\r\n}\r\n\r\nvar game = new Game(\r\n\t<HTMLElement>document.getElementById(\"ball\"),\r\n\t<HTMLElement>document.getElementById(\"paddle\"),\r\n\t<HTMLElement>document.getElementById(\"game-board\")\r\n);\r\n\r\ngame.run();"]}