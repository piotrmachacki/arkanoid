{"version":3,"sources":["app/app.ts"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["enum KeyCodes {\r\n\tLEFT = 37,\r\n\tRIGHT = 39\r\n}\r\n\r\nenum GameState {\r\n\tGameOver,\r\n\tlifeLoss,\r\n\tRunning\r\n}\r\n\r\nenum OffsetType {\r\n\tX,\r\n\tY\r\n}\r\n\r\nenum Side {\r\n\tNone,\r\n\tLeft,\r\n\tTop,\r\n\tRight, \r\n\tBottom\r\n}\r\n\r\nclass GameElement {\r\n\r\n\tstep: number = 1;\r\n\tminX: number;\r\n\tmaxX: number;\r\n\tminY: number;\r\n\tmaxY: number;\r\n\r\n\tconstructor(public gameElement: HTMLElement, public boardElement: HTMLElement) {\r\n\t\tthis.minX = 0;\r\n\t\tthis.maxX = this.boardElement.offsetWidth - this.gameElement.offsetWidth;\r\n\t\tthis.minY = 0;\r\n\t\tthis.maxY = this.boardElement.offsetHeight - this.gameElement.offsetHeight;\r\n\t}\r\n\r\n\tmoveTo(x: number | boolean = false, y: number | boolean = false) {\r\n\t\tif(x !== false) this.gameElement.style.left = x + 'px';\r\n\t\tif(y !== false) this.gameElement.style.top = y + 'px';\r\n\t}\r\n\r\n}\r\n\r\nclass Paddle extends GameElement {\r\n\r\n\tstep: number = 4;\r\n\tdirection: {left: number, right: number} = {left: -1, right: 1};\r\n\r\n\tconstructor(public paddleElement: HTMLElement, public boardElement: HTMLElement) {\r\n\t\tsuper(paddleElement, boardElement);\r\n\t}\r\n\r\n\tcalculatePosition(direction: number): number {\r\n\t\tlet left: number = this.gameElement.offsetLeft + this.step * direction;\r\n\t\tleft = (left>this.maxX) ? this.maxX : left;\r\n\t\tleft = (left<this.minX) ? this.minX : left;\r\n\t\treturn left;\r\n\t}\r\n\r\n\tmoveLeft() {\r\n\t\tthis.moveTo(this.calculatePosition(this.direction.left));\r\n\t}\r\n\r\n\tmoveRight() {\r\n\t\tthis.moveTo(this.calculatePosition(this.direction.right));\r\n\t}\r\n\r\n}\r\n\r\nclass Ball extends GameElement {\r\n\r\n\tstep: number = 3;\r\n\tposX: number;\r\n\tposY: number;\r\n\tdirection: number[] = [1,-1];\r\n\tcollisionSide: Side;\r\n\tbricks: Array<HTMLElement> = [];\r\n\r\n\tconstructor(public ballElement: HTMLElement, public paddleElement: HTMLElement, public boardElement: HTMLElement, public brickCollection: HTMLCollection) {\r\n\t\tsuper(ballElement, boardElement);\r\n\t\tthis.posX = ballElement.offsetLeft;\r\n\t\tthis.posY = ballElement.offsetTop;\r\n\t\tthis.collisionSide = Side.None;\r\n\t\tfor(let i = 0; i < brickCollection.length; i++) {\r\n\t\t\tthis.bricks.push(<HTMLElement>brickCollection[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tmove() {\r\n\t\t\r\n\t\tthis.posX = this.calculateNewPosition(OffsetType.X);\r\n\t\tthis.posY = this.calculateNewPosition(OffsetType.Y);\r\n\r\n\t\tthis.checkGameBoardCollision();\r\n\r\n\t\tif(this.checkObstacleCollision(this.paddleElement)) {\r\n\t\t\tthis.calculateEdgePosition(this.collisionSide, this.paddleElement);\r\n\t\t\tthis.flipDirection();\r\n\t\t}\r\n\r\n\t\tfor(let i = 0; i < this.bricks.length; i++) {\r\n\t\t\tlet brick = this.bricks[i];\r\n\t\t\tif(this.checkObstacleCollision(brick)) {\r\n\t\t\t\tthis.calculateEdgePosition(this.collisionSide, brick);\r\n\t\t\t\tthis.flipDirection();\r\n\t\t\t\tbrick.style.visibility = 'hidden';\r\n\t\t\t\tthis.bricks.splice(i, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.moveTo(this.posX, this.posY);\r\n\t}\r\n\r\n\tcalculateNewPosition(offsetType: number): number {\r\n\t\tlet pos: number;\r\n\t\tif(offsetType == OffsetType.X) pos = this.ballElement.offsetLeft + this.step * this.direction[offsetType];\r\n\t\tif(offsetType == OffsetType.Y) pos = this.ballElement.offsetTop + this.step * this.direction[offsetType];\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tcheckGameBoardCollision() {;\r\n\t\tif(this.ballElement.offsetLeft < this.minX) {\r\n\t\t\tthis.posX = this.minX;\r\n\t\t\tthis.collisionSide = Side.Left;\r\n\t\t\tthis.flipDirection();\r\n\t\t}\r\n\t\tif(this.ballElement.offsetLeft > this.maxX) {\r\n\t\t\tthis.posX = this.maxX;\r\n\t\t\tthis.collisionSide = Side.Right;\r\n\t\t\tthis.flipDirection();\r\n\t\t}\r\n\t\tif(this.ballElement.offsetTop < this.minY) {\r\n\t\t\tthis.posY = this.minY;\r\n\t\t\tthis.collisionSide = Side.Top;\r\n\t\t\tthis.flipDirection();\r\n\t\t}\r\n\t\tif(this.ballElement.offsetTop > this.maxY) {\r\n\t\t\tthis.posY = this.maxY;\r\n\t\t\tthis.collisionSide = Side.Bottom;\r\n\t\t\tthis.flipDirection();\r\n\t\t}\r\n\t}\r\n\r\n\tcheckObstacleCollision(obstacle: HTMLElement) {\r\n\t\tvar w = 0.5 * (this.ballElement.offsetWidth + obstacle.offsetWidth);\r\n\t\tvar h = 0.5 * (this.ballElement.offsetHeight + obstacle.offsetHeight);\r\n\t\tvar dx = (this.ballElement.offsetLeft + this.ballElement.offsetWidth/2) - (obstacle.offsetLeft + obstacle.offsetWidth/2);\r\n\t\tvar dy = (this.ballElement.offsetTop + this.ballElement.offsetHeight/2) - (obstacle.offsetTop + obstacle.offsetHeight/2);\r\n\r\n\t\tif(Math.abs(dx) < w && Math.abs(dy) < h) {\r\n\t\t\tvar wy = w * dy;\r\n\t\t\tvar hx = h * dx;\r\n\t\t\tif(wy > hx) {\r\n\t\t\t\tif(wy > -hx) {\r\n\t\t\t\t\tthis.collisionSide = Side.Bottom\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.collisionSide = Side.Left\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\tif(wy > -hx) {\r\n\t\t\t\t\tthis.collisionSide = Side.Right\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.collisionSide = Side.Top\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.collisionSide = Side.None;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n    calculateEdgePosition(side: Side, obstacle: HTMLElement) {\r\n    \tswitch(side) {\r\n\t\t\tcase Side.Left:\r\n\t\t\t\tthis.posX = obstacle.offsetLeft + this.ballElement.offsetWidth;\r\n\t\t\t\tbreak;\r\n\t\t\tcase Side.Right:\r\n\t\t\t\tthis.posX = obstacle.offsetLeft + obstacle.offsetWidth;\r\n\t\t\t\tbreak;\r\n\t\t\tcase Side.Top:\r\n\t\t\t\tthis.posY = obstacle.offsetTop - this.ballElement.offsetHeight;\r\n\t\t\t\tbreak;\r\n\t\t\tcase Side.Bottom:\r\n\t\t\t\tthis.posY = obstacle.offsetTop + obstacle.offsetHeight;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n    }\r\n\r\n    flipDirection() {\r\n    \tif(this.collisionSide == Side.Left || this.collisionSide == Side.Right) this.direction[OffsetType.X] *= -1;\r\n    \tif(this.collisionSide == Side.Top || this.collisionSide == Side.Bottom) this.direction[OffsetType.Y] *= -1;\r\n    }\r\n\r\n    // getPosition() {\r\n\t// \treturn {x: this.posX, y: this.posY};\r\n\t// }\r\n\r\n}\r\n\r\nclass Game {\r\n\r\n\tintervalTime: number = 10;\r\n\tpaddle: Paddle;\r\n\tball: Ball;\r\n\tkeyMap: boolean[] = [];\r\n\r\n\tconstructor(public ballElement: HTMLElement, public paddleElement: HTMLElement, public boardElement: HTMLElement, public brickCollection: HTMLCollection) {\r\n\t\tthis.paddle = new Paddle(paddleElement, boardElement);\r\n\t\tthis.ball = new Ball(ballElement, paddleElement, boardElement, brickCollection);\r\n\t}\r\n\r\n\trun() {\r\n\t\tdocument.addEventListener('keyup', e => this.keyMap[e.keyCode] = false);\r\n\t\tdocument.addEventListener('keydown', e => this.keyMap[e.keyCode] = true);\r\n\r\n\t\tsetInterval(() => {\r\n\r\n\t\t\tif(this.keyMap[KeyCodes.LEFT]) this.paddle.moveLeft();\r\n\t\t\tif(this.keyMap[KeyCodes.RIGHT]) this.paddle.moveRight();\r\n\r\n\t\t\tthis.ball.move();\r\n\r\n\t\t}, this.intervalTime);\r\n\t}\r\n\r\n}\r\n\r\nvar game = new Game(\r\n\t<HTMLElement>document.getElementById(\"ball\"),\r\n\t<HTMLElement>document.getElementById(\"paddle\"),\r\n\t<HTMLElement>document.getElementById(\"game-board\"),\r\n\t<HTMLCollection>document.getElementsByClassName(\"brick\")\r\n);\r\n\r\ngame.run();"]}